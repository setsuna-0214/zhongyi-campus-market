# 测试环境配置
spring.application.name=campus-market-test

# H2 内存数据库配置
spring.datasource.url=jdbc:h2:mem:testdb;MODE=MySQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;DATABASE_TO_LOWER=TRUE
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# H2 控制台（可选，调试用）
spring.h2.console.enabled=true

# 数据库初始化 - 使用 schema 和 data 脚本
spring.sql.init.mode=always
spring.sql.init.schema-locations=classpath:schema-h2.sql
spring.sql.init.data-locations=classpath:data-h2.sql

# JPA/Hibernate 配置 - 不自动创建表，使用 SQL 脚本
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# MyBatis 配置
mybatis.configuration.map-underscore-to-camel-case=true

# Redis 配置 - 使用嵌入式 Redis 或禁用
spring.data.redis.host=localhost
spring.data.redis.port=6379

# JWT 配置
jwt.secret=test_secret_key_for_integration_testing_32chars
jwt.expiration-seconds=3600

# 邮件配置 - 测试环境使用 Mock
spring.mail.host=localhost
spring.mail.port=25
spring.mail.username=test@test.com

# 禁用邮件健康检查（测试环境不需要）
management.health.mail.enabled=false

# 验证码配置
auth.code.ttl-seconds=300
auth.code.interval-seconds=60
auth.code.length=6
auth.code.subject=测试验证码

# OSS 配置 - 测试环境使用模拟值
aliyun.oss.endpoint=test-endpoint
aliyun.oss.access-key-id=test-key-id
aliyun.oss.access-key-secret=test-key-secret
aliyun.oss.bucket-name=test-bucket
aliyun.oss.cdn-domain=

# 日志级别
logging.level.org.example.campusmarket=DEBUG
logging.level.org.springframework.security=DEBUG
